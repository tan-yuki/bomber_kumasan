enchant();

var GAME_FRAME_WIDTH = 320;
var GAME_FRAME_HEIGHT = 320;
var SPACE_KEY_CODE = 32;
var B_KEY_CODE = 66;
var PLAYER_ICON = 'player.png';
var BOMB_ICON = 'player.png';
var FPS = 32;

$(document).ready(function(){

	var game = new Game(GAME_FRAME_WIDTH, GAME_FRAME_HEIGHT);
	game.fps = FPS;
	game.preload(PLAYER_ICON);
	game.preload(BOMB_ICON);
	game.rootScene.backgroundColor = '#f5deb3';

	// Bomb
	var Bomb = Class.create(Sprite, {

		initialize : function(x, y) {
			this.width  = 32;
			this.height = 32;
			Sprite.call(this, this.width, this.height);

			this.image = game.assets[BOMB_ICON];
			this.x = x;
			this.y = y;

			this.addEventListener(enchant.Event.ENTER_FRAME, function(){
			});
			game.rootScene.addChild(this);
		},
		
		explode : function() {
			
		}
	});

	// Player
	var Player = Class.create(Sprite, {
		
		initialize : function() {

			this.width  = 32;
			this.height = 32;
			Sprite.call(this, this.width, this.height);

			this.image   = game.assets[PLAYER_ICON];
			this._speed  = 5;

			this.x = (GAME_FRAME_WIDTH  - this.width)  / 2;
			this.y = (GAME_FRAME_HEIGHT - this.height) / 2;

			// set event
			this.addEventListener(enchant.Event.ENTER_FRAME, function() {

				// moveing
				if(game.input.left  && !game.input.up   && !game.input.down)  {
					this.x -= this._speed;
				}

				if(game.input.right && !game.input.up   && !game.input.down)  {
					this.x += this._speed;
				}

				if(game.input.up    && !game.input.left && !game.input.right) {
					this.y -= this._speed;
				}

				if(game.input.down  && !game.input.left && !game.input.right) {
					this.y += this._speed;
				}

				// set bomb
			});

			var self = this;
			game.rootScene.addEventListener('touchstart' , function(event){
				var bomb = new Bomb(self.x, self.y);
			});
		},
	});

	var Enemy = Class.create(Sprite, {
		initialize : function() {
			var width 
		}
	});

	
	game.onload = function() {
		// Playser settings
		var player = new Player();
		game.rootScene.addChild(player);
	};

	game.start();
});


